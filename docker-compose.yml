services:
  cowrie:
    image: cowrie/cowrie
    restart: unless-stopped
    ports:
      - "22:2222"         # ssh
      - "23:2223"         # telnet
    environment:
      - COWRIE_TELNET_ENABLED=yes
    volumes:
      - ppv-cowrie-etc:/cowrie/cowrie-git/etc
      - ppv-cowrie-var:/cowrie/cowrie-git/var

  conpot:
    build: ./src/conpot
    ports:
      - "80:8800"         # SCADA UI, http
      - "102:10201"       # S7Comm
      - "502:5020"        # Modbus
      - "161:16100/udp"   # SNMP
      - "47808:47808/udp" # Bacnet
      - "623:6230/udp"    # IPMI
      - "21:2121"         # FTP
      - "69:6969/udp"     # TFTP
      - "44818:44818"     # EN/IP
    restart: unless-stopped
    volumes:
      - ppv-conpot-var:/var/log

  heralding:
    build: ./src/heralding
    # avail ports 21 22 23 25 80 110 143 443 465 993 995 1080 2222 3306 3389 5432 5900
    ports:
      - 25:25
      - 110:110
      - 143:143
      - 443:443 
      - 465:465
      - 993:993
      - 995:995
      - 1080:1080
      - 2222:2222
      - 3306:3306
      - 3389:3389
      - 5432:5432
      - 5900:5900
    restart: unless-stopped
    volumes:
      - ppv-heralding-var:/var/log

volumes:
  ppv-cowrie-etc:
  ppv-cowrie-var:
  ppv-conpot-var:
  ppv-heralding-var:
